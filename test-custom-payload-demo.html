<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom JSON Payload Testing - Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #37bd7e, #4ade80);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .header p {
            color: #94a3b8;
            font-size: 1.1rem;
        }
        .demo-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .feature-card {
            background: rgba(55, 189, 126, 0.1);
            border: 1px solid rgba(55, 189, 126, 0.3);
            border-radius: 8px;
            padding: 20px;
        }
        .feature-card h3 {
            color: #37bd7e;
            margin-top: 0;
            margin-bottom: 10px;
        }
        .code-block {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .template-example {
            margin: 20px 0;
        }
        .template-header {
            color: #fbbf24;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .ui-layout {
            display: grid;
            grid-template-columns: 400px 1fr 320px;
            gap: 20px;
            height: 600px;
            margin: 20px 0;
        }
        .panel {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid #374151;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
        }
        .panel h4 {
            margin-top: 0;
            color: #f3f4f6;
            border-bottom: 1px solid #374151;
            padding-bottom: 10px;
        }
        .workflow-node {
            background: rgba(55, 189, 126, 0.2);
            border: 2px solid #37bd7e;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
            position: relative;
        }
        .workflow-node.active {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.2);
            animation: pulse 2s infinite;
        }
        .workflow-node.success {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.2);
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .node-response {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            padding: 12px;
            margin: 8px 0;
            font-size: 12px;
        }
        .response-input {
            color: #60a5fa;
        }
        .response-output {
            color: #34d399;
        }
        .validation-status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .validation-valid {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        .validation-invalid {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
        .btn {
            background: #37bd7e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }
        .btn:hover {
            background: #2da76a;
        }
        .btn:disabled {
            background: #6b7280;
            cursor: not-allowed;
        }
        .usage-steps {
            counter-reset: step-counter;
        }
        .usage-step {
            counter-increment: step-counter;
            margin: 20px 0;
            padding-left: 40px;
            position: relative;
        }
        .usage-step::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #37bd7e;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ Custom JSON Payload Testing</h1>
            <p>Comprehensive workflow testing with real-world data scenarios</p>
        </div>

        <!-- Feature Overview -->
        <div class="demo-section">
            <h2>‚ú® Key Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>üìù JSON Editor with Validation</h3>
                    <p>Real-time JSON validation with line-specific error messages and helpful warnings for optimal payload structure.</p>
                </div>
                <div class="feature-card">
                    <h3>üìã Template Library</h3>
                    <p>Pre-built templates for Fathom webhooks, CRM operations, task management, and generic webhook scenarios.</p>
                </div>
                <div class="feature-card">
                    <h3>üîç Node Response Viewer</h3>
                    <p>Real-time visualization of data flow between nodes with input/output inspection and execution timing.</p>
                </div>
                <div class="feature-card">
                    <h3>üìä Execution Timeline</h3>
                    <p>Visual workflow execution with animated data flow, node status indicators, and comprehensive logging.</p>
                </div>
                <div class="feature-card">
                    <h3>üíæ Payload History</h3>
                    <p>Automatic saving of test payloads with results tracking for quick re-testing and comparison.</p>
                </div>
                <div class="feature-card">
                    <h3>üì§ Import/Export</h3>
                    <p>Import existing JSON files or export test scenarios for sharing and documentation purposes.</p>
                </div>
            </div>
        </div>

        <!-- UI Layout Demo -->
        <div class="demo-section">
            <h2>üñ•Ô∏è User Interface Layout</h2>
            <div class="ui-layout">
                <!-- JSON Editor Panel -->
                <div class="panel">
                    <h4>üìù JSON Payload Editor</h4>
                    <div style="margin-bottom: 10px;">
                        <select style="width: 100%; padding: 5px; background: #374151; color: white; border: 1px solid #4b5563; border-radius: 4px;">
                            <option>Fathom Meeting Summary</option>
                            <option>CRM Deal Created</option>
                            <option>Task Completed</option>
                            <option>Custom Webhook</option>
                        </select>
                    </div>
                    <div class="validation-status validation-valid">‚úÖ Valid JSON</div>
                    <div class="code-block" style="height: 200px; font-size: 11px;">
{
  "meeting_id": "fathom_123456",
  "title": "Sales Discovery Call",
  "participants": [
    {
      "name": "John Smith",
      "email": "john@company.com"
    }
  ],
  "summary": "Discussed requirements",
  "action_items": [
    {
      "text": "Send proposal",
      "assignee": "john@company.com",
      "due_date": "2024-01-18"
    }
  ]
}
                    </div>
                    <button class="btn" style="width: 100%; margin-top: 10px;">‚ñ∂Ô∏è Test with Payload</button>
                </div>

                <!-- Workflow Visualization -->
                <div class="panel">
                    <h4>üîÑ Workflow Execution</h4>
                    <div style="text-align: center; padding: 20px;">
                        <div class="workflow-node success">
                            üéØ Fathom Webhook<br>
                            <small>‚úÖ 125ms</small>
                        </div>
                        <div style="margin: 10px 0; color: #10b981;">‚¨áÔ∏è</div>
                        <div class="workflow-node active">
                            üîÄ Conditional Branch<br>
                            <small>‚è≥ Processing...</small>
                        </div>
                        <div style="margin: 10px 0; color: #6b7280;">‚¨áÔ∏è</div>
                        <div class="workflow-node" style="opacity: 0.5;">
                            üìù Create Task<br>
                            <small>‚è∏Ô∏è Pending</small>
                        </div>
                    </div>
                </div>

                <!-- Node Responses Panel -->
                <div class="panel">
                    <h4>üìä Node Responses</h4>
                    <div class="node-response">
                        <strong>üéØ Fathom Webhook</strong><br>
                        <div class="response-input">üì• Input: {"meeting_id": "fathom_123456"...}</div>
                        <div class="response-output">üì§ Output: {"processed": true, "action_items": 1}</div>
                        <small>‚è±Ô∏è 125ms</small>
                    </div>
                    <div class="node-response">
                        <strong>üîÄ Conditional Branch</strong><br>
                        <div class="response-input">üì• Input: {"action_items": 1}</div>
                        <div class="response-output">üì§ Output: {"condition_met": true}</div>
                        <small>‚è±Ô∏è 45ms</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Template Examples -->
        <div class="demo-section">
            <h2>üìã Payload Template Examples</h2>
            
            <div class="template-example">
                <div class="template-header">üéØ Fathom Meeting Summary</div>
                <div class="code-block">
{
  "meeting_id": "fathom_123456",
  "title": "Sales Discovery Call - Acme Corp",
  "participants": [
    {"name": "John Smith", "email": "john@company.com", "role": "host"},
    {"name": "Sarah Johnson", "email": "sarah@acmecorp.com", "role": "guest"}
  ],
  "summary": "Discussed product requirements and budget.",
  "action_items": [
    {
      "text": "Send proposal with enterprise features",
      "assignee": "john@company.com",
      "due_date": "2024-01-18"
    }
  ],
  "sentiment": "positive"
}
                </div>
            </div>

            <div class="template-example">
                <div class="template-header">üíº CRM Deal Created</div>
                <div class="code-block">
{
  "event_type": "deal_created",
  "deal_id": "deal_987654",
  "deal_name": "Enterprise Software License - TechCorp",
  "company_name": "TechCorp Solutions",
  "contact": {
    "name": "Alice Chen",
    "email": "alice@techcorp.com",
    "title": "VP of Engineering"
  },
  "value": {"amount": 75000, "currency": "USD"},
  "stage": "SQL",
  "source": "inbound_demo_request"
}
                </div>
            </div>

            <div class="template-example">
                <div class="template-header">‚úÖ Task Completed</div>
                <div class="code-block">
{
  "event_type": "task_completed",
  "task_id": "task_345678",
  "title": "Send contract for review",
  "completed_by": "legal@company.com",
  "outcome": "success",
  "notes": "Contract sent via DocuSign. Client confirmed receipt.",
  "follow_up_required": true
}
                </div>
            </div>
        </div>

        <!-- Usage Instructions -->
        <div class="demo-section">
            <h2>üöÄ How to Use Custom Payload Testing</h2>
            <div class="usage-steps">
                <div class="usage-step">
                    <strong>Navigate to Testing Lab</strong><br>
                    Go to Workflows ‚Üí Testing Lab ‚Üí Custom Payload tab
                </div>
                <div class="usage-step">
                    <strong>Select a Template</strong><br>
                    Choose from Fathom, CRM, Task, or Webhook templates, or start with a blank payload
                </div>
                <div class="usage-step">
                    <strong>Edit JSON Payload</strong><br>
                    Modify the JSON data in the editor. Real-time validation will guide you with errors and warnings
                </div>
                <div class="usage-step">
                    <strong>Test Workflow</strong><br>
                    Click "Test with Payload" to execute your workflow with the custom data
                </div>
                <div class="usage-step">
                    <strong>Analyze Results</strong><br>
                    Watch the visual execution and examine node responses to understand data flow
                </div>
                <div class="usage-step">
                    <strong>Iterate and Improve</strong><br>
                    Use payload history to re-test scenarios and compare results across iterations
                </div>
            </div>
        </div>

        <!-- Benefits -->
        <div class="demo-section">
            <h2>üí° Benefits for Workflow Development</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>üêõ Debug Complex Scenarios</h3>
                    <p>Test edge cases and unusual data patterns that might not occur in normal operation.</p>
                </div>
                <div class="feature-card">
                    <h3>‚ö° Rapid Iteration</h3>
                    <p>Quickly test different data structures without waiting for real events to trigger.</p>
                </div>
                <div class="feature-card">
                    <h3>üìà Validate Logic</h3>
                    <p>Ensure conditional branches and data transformations work correctly with various inputs.</p>
                </div>
                <div class="feature-card">
                    <h3>üéØ Focus Testing</h3>
                    <p>Test specific workflow branches or scenarios by crafting targeted payload data.</p>
                </div>
                <div class="feature-card">
                    <h3>üìö Document Examples</h3>
                    <p>Create and save example payloads that serve as documentation for your workflows.</p>
                </div>
                <div class="feature-card">
                    <h3>üîß Pre-deployment Testing</h3>
                    <p>Validate workflows thoroughly before deploying to production environments.</p>
                </div>
            </div>
        </div>

        <!-- Technical Features -->
        <div class="demo-section">
            <h2>‚öôÔ∏è Technical Implementation</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h3>üèóÔ∏è Core Architecture</h3>
                    <ul style="color: #94a3b8; line-height: 1.6;">
                        <li><strong>WorkflowTestEngine</strong> - Enhanced with custom payload support</li>
                        <li><strong>PayloadValidation</strong> - Real-time JSON validation with detailed error reporting</li>
                        <li><strong>Template System</strong> - Categorized, searchable payload templates</li>
                        <li><strong>Node Response Tracking</strong> - Input/output data capture for each node</li>
                        <li><strong>History Management</strong> - LocalStorage-based payload history with metadata</li>
                    </ul>
                </div>
                <div>
                    <h3>üé® UI Components</h3>
                    <ul style="color: #94a3b8; line-height: 1.6;">
                        <li><strong>JSON Editor</strong> - Syntax highlighting with line numbers</li>
                        <li><strong>Template Picker</strong> - Category-based template selection</li>
                        <li><strong>Validation Display</strong> - Error/warning indicators with suggestions</li>
                        <li><strong>Node Visualization</strong> - Enhanced ReactFlow with execution states</li>
                        <li><strong>Response Inspector</strong> - Collapsible node response cards</li>
                    </ul>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 40px; padding: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
            <p style="color: #94a3b8;">üöÄ Ready to enhance your workflow testing experience with custom JSON payloads!</p>
        </div>
    </div>
</body>
</html>