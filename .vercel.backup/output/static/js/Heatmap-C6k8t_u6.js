import{j as e}from"./vendor-state-CpjwTZNq.js";import{r as D,a as C}from"./vendor-react-DoYyFkVR.js";import{g as j,c as A,b as k,d as q}from"./index.html-Cwo_Unfk.js";import{motion as O}from"./ui-animation-Dzb4KUJ1.js";import{p as c,s as T,e as F,V as H,K as R,M as S,d as W}from"./vendor-utils-Cb9OXVhE.js";import{a as _}from"./vendor-router-CQXjpROx.js";import{a as $,C as E}from"./vendor-icons-HRBKouGg.js";import"./vendor-supabase-BuXd-BBn.js";import"./ui-radix-core-CdvL28QE.js";import"./vendor-charts-D4YcUEy1.js";function I({date:o,points:a,activities:s,onClick:m}){const y=()=>a===0?0:a>=100?1:.1+a/100*.8,g=()=>a>=100?"bg-gradient-to-r from-amber-400 to-amber-500 shadow-lg shadow-amber-500/20":"bg-emerald-500";return e.jsxs(O.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>m?.(),className:j("relative aspect-square rounded-lg overflow-hidden group transition-all duration-300",a>0?"hover:shadow-lg":"cursor-default"),children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800/50"}),e.jsx("div",{className:j("absolute inset-0 transition-opacity duration-300",g()),style:{opacity:y()}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-white/90",children:c(o,"d")})}),a>0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-gray-900/90 transition-opacity duration-300",children:e.jsxs("div",{className:"text-center p-1",children:[e.jsxs("div",{className:"text-xs sm:text-sm font-medium text-white",children:[a," pts"]}),e.jsx("div",{className:"text-[10px] sm:text-xs text-gray-400",children:c(o,"MMM d")}),(s.outbound>0||s.meetings>0||s.proposals>0||s.deals>0)&&e.jsxs("div",{className:"mt-1 space-y-0.5 text-[8px] sm:text-[10px]",children:[s.outbound>0&&e.jsxs("div",{className:"text-blue-400",children:[s.outbound," calls"]}),s.meetings>0&&e.jsxs("div",{className:"text-violet-400",children:[s.meetings," meets"]}),s.proposals>0&&e.jsxs("div",{className:"text-orange-400",children:[s.proposals," props"]}),s.deals>0&&e.jsxs("div",{className:"text-emerald-400",children:[s.deals," deals"]})]})]})})]})}function X(){A();const[o,a]=D.useState(new Date),{activities:s}=k(),m=T(o),y=F(o),{setFilters:g}=q(),v=_(),h=H(m),f=R({start:m,end:y}),b=h===0?6:h-1,N=b+f.length,w=Math.ceil(N/7),M=r=>{const d=c(r,"yyyy-MM-dd"),x=s.filter(t=>c(new Date(t.date),"yyyy-MM-dd")===d),p=x.filter(t=>t.type==="outbound").reduce((t,l)=>t+(l.quantity||1),0),i=x.filter(t=>t.type==="meeting").reduce((t,l)=>t+(l.quantity||1),0),n=x.filter(t=>t.type==="proposal").reduce((t,l)=>t+(l.quantity||1),0),u=x.filter(t=>t.type==="sale").reduce((t,l)=>t+(l.quantity||1),0);return{points:p*1+i*5+n*10+u*20,activities:{outbound:p,meetings:i,proposals:n,deals:u}}};return e.jsx("div",{className:"h-screen p-4 sm:p-6 lg:p-8 mt-12 lg:mt-0 flex flex-col",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Activity Heatmap"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Track your daily sales performance"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>a(r=>S(r,1)),className:"p-2 hover:bg-gray-800/50 rounded-lg transition-colors",children:e.jsx($,{className:"w-5 h-5 text-gray-400"})}),e.jsx("span",{className:"text-base sm:text-lg font-medium text-emerald-500",children:c(o,"MMMM yyyy")}),e.jsx("button",{onClick:()=>a(r=>W(r,1)),className:"p-2 hover:bg-gray-800/50 rounded-lg transition-colors",children:e.jsx(E,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-400 bg-gray-800/50 px-3 py-1.5 rounded-lg border border-gray-700/50",children:"Outbound: 1pt | Meeting: 5pts | Proposal: 10pts | Deal: 20pts"})]}),e.jsxs("div",{className:"flex-1 bg-gray-900/50 backdrop-blur-xl rounded-xl border border-gray-800/50 p-3 sm:p-4 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"grid grid-cols-[30px_repeat(7,1fr)] gap-1 flex-1 min-h-0",children:[e.jsx("div",{className:"text-gray-400 text-xs sm:text-sm py-2"}),["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(r=>e.jsx("div",{className:"text-gray-400 text-xs text-center py-2",children:r},r)),Array.from({length:w}).map((r,d)=>e.jsxs(C.Fragment,{children:[e.jsxs("div",{className:"text-gray-400 text-xs text-right pr-2 flex items-center justify-end",children:["W",d+1]}),Array.from({length:7}).map((x,p)=>{const i=d*7+p-b+1,n=new Date(m);if(n.setDate(i),i<=0||i>f.length)return e.jsx("div",{className:"aspect-square"},`empty-${d}-${p}`);const{points:u,activities:t}=M(n);return e.jsx(I,{date:n,points:u,activities:t,onClick:()=>{u>0&&(g({searchQuery:"",type:void 0,dateRange:{start:new Date(n.getTime()),end:new Date(n.getTime()+24*60*60*1e3-1)}}),v("/activity"))}},c(n,"yyyy-MM-dd"))})]},`week-${d}`))]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-2 text-xs text-gray-400 mt-3 p-2 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[e.jsx("span",{children:"Less"}),e.jsx("div",{className:"w-3 h-3 rounded bg-gray-800"}),e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500 opacity-20"}),e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500 opacity-40"}),e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500 opacity-60"}),e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500 opacity-80"}),e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500"}),e.jsx("div",{className:"w-3 h-3 rounded bg-gradient-to-r from-amber-400 to-amber-500 shadow-sm"}),e.jsx("span",{children:"More"}),e.jsx("span",{className:"ml-2 text-amber-400",children:"â˜… 100+ points"})]})]})]})})}export{X as default};
