import{j as e}from"./vendor-state-CpjwTZNq.js";import{r as i}from"./vendor-react-DoYyFkVR.js";import{e as p,s as a}from"./index.html-Cwo_Unfk.js";import"./vendor-router-CQXjpROx.js";import"./vendor-supabase-BuXd-BBn.js";import"./vendor-utils-Cb9OXVhE.js";import"./ui-radix-core-CdvL28QE.js";import"./vendor-icons-HRBKouGg.js";import"./ui-animation-Dzb4KUJ1.js";import"./vendor-charts-D4YcUEy1.js";function E(){const{user:s}=p(),[o,g]=i.useState([]),[d,t]=i.useState(""),[h,l]=i.useState(!0);i.useEffect(()=>{c()},[s]);const c=async()=>{if(!s){t("No user logged in"),l(!1);return}try{const{data:r,error:n}=await a.from("meetings").select("*"),{data:m,error:u}=await a.from("meetings").select("*").eq("owner_user_id",s.id);g(r||[]),n?t(n.message):u&&t(u.message)}catch(r){t(r.message)}finally{l(!1)}},x=async()=>{if(!s)return;const r=`user-meeting-${Date.now()}`;try{const{data:n,error:m}=await a.from("meetings").insert({fathom_recording_id:r,title:"Test Meeting for Current User",share_url:`https://fathom.video/share/${r}`,calls_url:"https://fathom.video/calls/123456",meeting_start:new Date().toISOString(),meeting_end:new Date(Date.now()+36e5).toISOString(),duration_minutes:60,owner_user_id:s.id,owner_email:s.email,team_name:"Sales",summary:"This is a test meeting created directly for the current user.",updated_at:new Date().toISOString()}).select();m||await c()}catch{}};return h?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Debug Meetings"}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-800 rounded",children:[e.jsxs("p",{children:["Current User ID: ",e.jsx("code",{className:"text-green-400",children:s?.id})]}),e.jsxs("p",{children:["Current User Email: ",e.jsx("code",{className:"text-green-400",children:s?.email})]})]}),d&&e.jsxs("div",{className:"mb-4 p-4 bg-red-900/50 text-red-200 rounded",children:["Error: ",d]}),e.jsx("button",{onClick:x,className:"mb-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded",children:"Create Meeting for Current User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["All Meetings in Database (",o.length,")"]}),o.map(r=>e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",r.title]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",r.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Owner User ID:"})," ",e.jsx("code",{className:r.owner_user_id===s?.id?"text-green-400":"text-red-400",children:r.owner_user_id||"NULL"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Owner Email:"})," ",r.owner_email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Match Current User:"})," ",r.owner_user_id===s?.id?"✅ YES":"❌ NO"]})]},r.id))]})]})}export{E as default};
